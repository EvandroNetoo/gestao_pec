{% load static %}

<!DOCTYPE html>
<html lang="pt-br">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>

            {% block title %}

            {% endblock title %}

            {% block site_name %}

                PEC

            {% endblock site_name %}

        </title>

        <link href="https://cdn.jsdelivr.net/npm/daisyui@5"
              rel="stylesheet"
              type="text/css"
              hx-preserve="true"
              id="daisyui-css" />
        <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"
                hx-preserve="true"
                id="tailwindcss-js"></script>
        <script src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.8/dist/htmx.min.js"
                integrity="sha384-/TgkGk7p307TH7EXJDuUlgG3Ce1UVolAOFopFekQkkXihi5u/6OCvVKyz1W+idaz"
                crossorigin="anonymous"
                hx-preserve="true"
                id="htmx-js"></script>

        <link rel="icon"
              href="{% static 'img/logo_gestao_pec.png' %}"
              type="image/png"
              hx-preserve="true"
              id="favicon">

        <link href="{% static 'css/styles.css' %}"
              rel="stylesheet"
              type="text/css"
              hx-preserve="true"
              id="styles-css" />

        {% block extrahead %}

        {% endblock extrahead %}

    </head>

    <body class="bg-base-200 min-h-screen" hx-boost="true">

        <div id="htmx-progress-bar"
             class="bg-primary/90"
             style="position:fixed;
                    top:0;
                    left:0;
                    height:3px;
                    width:0;
                    z-index:9999;
                    transition:width 0.2s ease,opacity 0.4s ease;
                    opacity:0;
                    pointer-events:none"
             hx-preserve></div>

        <script>
            (function() {
                var bar = document.getElementById('htmx-progress-bar');
                var timer = null;

                function startBar() {
                    clearTimeout(timer);
                    bar.style.transition = 'width 0.2s ease, opacity 0.1s ease';
                    bar.style.opacity = '1';
                    bar.style.width = '0%';
                    // Animate to ~80% gradually
                    requestAnimationFrame(function() {
                        bar.style.transition = 'width 8s cubic-bezier(0.1,0.05,0,1), opacity 0.1s ease';
                        bar.style.width = '80%';
                    });
                }

                function finishBar() {
                    clearTimeout(timer);
                    bar.style.transition = 'width 0.15s ease, opacity 0.4s ease 0.15s';
                    bar.style.width = '100%';
                    timer = setTimeout(function() {
                        bar.style.opacity = '0';
                        timer = setTimeout(function() {
                            bar.style.width = '0%';
                        }, 400);
                    }, 150);
                }

                document.body.addEventListener('htmx:beforeRequest', startBar);
                document.body.addEventListener('htmx:afterRequest', finishBar);
            })();
        </script>

        {% block content %}

        {% endblock content %}

    </body>

</html>
